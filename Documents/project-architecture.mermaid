graph TD
    subgraph Outer["External Layer"]
        UI["UI (Web/API)"]
        DB["Database"]
        External["External Services"]
    end
    
    subgraph Infrastructure["Infrastructure Layer"]
        Repos["Repositories"]
        Services["External Services Implementation"]
    end
    
    subgraph Application["Application Layer"]
        AppServices["Application Services"]
        Commands["Commands"]
        Queries["Queries"]
        Behaviors["Behaviors/Pipeline"]
    end
    
    subgraph Domain["Domain Layer (Core)"]
        Entities["Entities"]
        ValueObjects["Value Objects"]
        DomainServices["Domain Services"]
        DomainEvents["Domain Events"]
    end
    
    subgraph Contracts["Core Contracts"]
        Interfaces["Interfaces"]
        DTOs["DTOs"]
    end

    %% Dependencies
    UI --> Application
    UI --> Infrastructure
    Infrastructure --> Application
    Infrastructure --> Domain
    Application --> Domain
    Domain --> Contracts

    %% Styling
    classDef outerStyle fill:#f4d1ae,stroke:#333,stroke-width:2px
    classDef infraStyle fill:#e4c1f9,stroke:#333,stroke-width:2px
    classDef appStyle fill:#d0f4de,stroke:#333,stroke-width:2px
    classDef domainStyle fill:#7dc4f0,stroke:#333,stroke-width:2px
    classDef contractStyle fill:#ffadad,stroke:#333,stroke-width:2px

    class UI,DB,External outerStyle
    class Repos,Services infraStyle
    class AppServices,Commands,Queries,Behaviors appStyle
    class Entities,ValueObjects,DomainServices,DomainEvents domainStyle
    class Interfaces,DTOs contractStyle
